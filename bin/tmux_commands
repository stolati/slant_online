#!/usr/bin/env bash

SESSION=tmux-commands-$RANDOM
WINDOW=$SESSION:0

tmux new -d -s $SESSION
first=true

for cmd in "$@" ; do {





}


for cmd in "$@"; do {
  echo "Process \"$cmd\" started";
  $cmd & pid=$!
  PID_LIST+=" $pid";
} done

trap "kill $PID_LIST" SIGINT

echo "Parallel processes have started";

wait $PID_LIST

echo
echo "All processes have completed";

	unset TMUX ; tmux new -s dev_local-makefile-session '\
		$(MAKE) -C server dev_local_start \; \
		select-layout even-vertical \; \
	'

dev_local_start:
	./bin/parallel_commands \
	"$(MAKE) -C server dev_local_start" \

# From https://unix.stackexchange.com/questions/22682/how-to-launch-a-set-of-program-inside-tmux-or-gnome-terminal-within-a-script
#tmux new -d -s my-session 'echo window-1 pane-1; sleep 8' \; \
#          split-window -d 'echo window-1 pane-2; sleep 6' \; down-pane \; \
#            new-window -d 'echo window-2;        sleep 4' \; next-window \; \
#                attach \;

